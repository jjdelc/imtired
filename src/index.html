<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1" />
<link rel="icon" href="favicon.svg?v=0"/>
<link rel="manifest" href="./manifest.json?v=0">
<link href="./style.css" rel="stylesheet">
<title>7mins</title>
</head>
<body>
<div id="app">
<top-menu></top-menu>
<section class="app-contents">
    <workout-main
        ref="workoutScreens"
        v-on:go-home="goHome"
        :routine="routine"
        v-if="state === 'workout'"
    ></workout-main>
    <app-start
        v-if="state === 'start'"
        v-on:start-workout="startWorkout"
        :workouts="workouts"
    ></app-start>
</section>
</div>

<script type="text/x-template" id="topMenuTpl">
<div class="top-menu">
    <img class="logo" src="./favicon.svg"/>
I'm tired
</div>
</script>

<script type="text/x-template" id="appStartTpl">
<div>
    <p>Select a workout</p>
    <ol class="workouts-list">
    <li v-for="wo in workouts">
        <button class="workout-trigger" @click="startWorkout(wo)">{{wo.name}}</button>
    </li>
    </ol>
</div>
</script>

<script type="text/x-template" id="workoutTpl">
<div class="workout-content">
    <h1 class="workout-header">
        <span>
        {{routine.name}}
        </span>
        <button
                v-show="state !== 'done'"
                @click="stop"
        >Stop</button>
    </h1>
    <section class="step-content" v-show="state === 'step' && !!currentStep">
        <div class="progress-container">
        <p
            v-if="!!currentStep"
            :class="timerClass"
            :style="{animationDuration: currentStep.time + 's'}"
        ></p>
        </div>
        <figure class="step-graphic">
            <img v-if="!!currentStep" :src="currentStep.graphic"/>
        </figure>

        <p class="step-name" v-if="!!currentStep">
            {{currentStep.name}}
            ({{timeLeft}})
        </p>
    </section>
    <section class="step-content" v-show="state === 'rest'">
        <p class="resting" v-if="!!currentStep">
            Coming up:
            <br/>
            {{currentStep.name}}
            <br/>
            <span class="big-countdown">{{timeLeft}}</span>
        </p>
        <div class="progress-container">
        <p
            :class="timerClass"
            :style="{animationDuration: routine.rest + 's'}"
        ></p>
        </div>
    </section>
    <section class="step-content" v-show="state === 'warmup'">
        <p class="resting">
            Prepare to begin...
            <br/>
            "{{routine.name}}"
            <br/>
            <span class="big-countdown">{{timeLeft}}</span>
        </p>
        <div class="progress-container">
        <p
            :class="timerClass"
            :style="{animationDuration: routine.rest + 's'}"
        ></p>
        </div>
    </section>
    <section class="step-content" v-show="state === 'done'">
        <p>Done!!</p>
        <p><button @click="goHome">Go to homepage</button></p>
    </section>
</div>
</script>

<script src="./vue.js"></script>
<script src="./app.js"></script>
<script src="./NoSleep.min.js"></script>
<script src="./upup.min.js"></script>
<script>
    UpUp.start({
    'content-url': 'index.html',
    'assets': [
        '/favicon.svg?v=0',
        '/manifest.json?v=0',
        '/style.css',
        '/vue.js',
        '/app.js',
        '/upup.min.js'
    ]
   });
</script>
</body>
</html>
